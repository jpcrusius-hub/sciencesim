<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fadenpendel – Simulation</title>
    <meta name="subject" content="Physik">
    <meta name="topic" content="Mechanik">
    <meta name="grade" content="7-10">
    <meta name="description" content="Untersuche den Zusammenhang zwischen Pendellänge, Masse und Schwingungsdauer">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 20px;
        }

        h1 {
            font-size: 1.4em;
            font-weight: 600;
            color: #222;
            margin-bottom: 5px;
        }

        .breadcrumb {
            font-size: 0.85em;
            color: #666;
        }

        .breadcrumb a {
            color: #0066cc;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .simulation-area {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 700px) {
            .simulation-area {
                grid-template-columns: 1fr;
            }
        }

        .canvas-container {
            background: #fff;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }

        canvas {
            display: block;
        }

        .controls {
            background: #fff;
            border: 1px solid #ddd;
            padding: 20px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 8px;
        }

        .control-label span {
            font-size: 0.9em;
            font-weight: 500;
            color: #333;
        }

        .control-value {
            font-size: 0.85em;
            color: #666;
            font-family: monospace;
        }

        input[type="range"] {
            width: 100%;
            margin: 0;
        }

        .buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            flex: 1;
            padding: 10px;
            font-size: 0.9em;
            border: 1px solid #ccc;
            background: #fff;
            cursor: pointer;
            font-family: inherit;
        }

        button:hover {
            background: #f5f5f5;
        }

        button.active {
            background: #333;
            color: #fff;
            border-color: #333;
        }

        .output {
            background: #f9f9f9;
            padding: 15px;
            border: 1px solid #e0e0e0;
        }

        .output-title {
            font-size: 0.85em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .output-row {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
            font-size: 0.9em;
        }

        .output-row:last-child {
            border-bottom: none;
        }

        .output-label {
            color: #555;
        }

        .output-value {
            font-family: monospace;
            color: #222;
            font-weight: 500;
        }

        .info-box {
            background: #fff;
            border: 1px solid #ddd;
            padding: 15px;
        }

        .info-box h3 {
            font-size: 0.95em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .info-box p {
            font-size: 0.9em;
            color: #555;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .info-box p:last-child {
            margin-bottom: 0;
        }

        .formula {
            background: #f5f5f5;
            padding: 10px;
            text-align: center;
            font-family: "Times New Roman", serif;
            font-size: 1.1em;
            margin: 10px 0;
            border-left: 3px solid #2c5aa0;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <p class="breadcrumb"><a href="../../../">← Übersicht</a> · Physik · Mechanik</p>
        <h1>Fadenpendel</h1>
    </header>

    <div class="simulation-area">
        <div class="canvas-container">
            <canvas id="pendulum" width="500" height="400"></canvas>
        </div>

        <div class="controls">
            <div class="buttons">
                <button id="btn-start" class="active">Start</button>
                <button id="btn-stop">Stopp</button>
                <button id="btn-reset">Reset</button>
            </div>

            <div class="control-group">
                <div class="control-label">
                    <span>Pendellänge</span>
                    <span class="control-value" id="val-length">1.00 m</span>
                </div>
                <input type="range" id="slider-length" min="0.2" max="2.0" step="0.05" value="1.0">
            </div>

            <div class="control-group">
                <div class="control-label">
                    <span>Masse</span>
                    <span class="control-value" id="val-mass">0.50 kg</span>
                </div>
                <input type="range" id="slider-mass" min="0.1" max="2.0" step="0.1" value="0.5">
            </div>

            <div class="control-group">
                <div class="control-label">
                    <span>Anfangsauslenkung</span>
                    <span class="control-value" id="val-angle">15°</span>
                </div>
                <input type="range" id="slider-angle" min="5" max="45" step="1" value="15">
            </div>

            <div class="output">
                <div class="output-title">Messwerte</div>
                <div class="output-row">
                    <span class="output-label">Schwingungsdauer T</span>
                    <span class="output-value" id="out-period">2.01 s</span>
                </div>
                <div class="output-row">
                    <span class="output-label">Frequenz f</span>
                    <span class="output-value" id="out-frequency">0.50 Hz</span>
                </div>
                <div class="output-row">
                    <span class="output-label">Schwingungen</span>
                    <span class="output-value" id="out-count">0</span>
                </div>
            </div>
        </div>
    </div>

    <div class="info-box">
        <h3>Beobachtungsaufgaben</h3>
        <p>1. Verändere die Pendellänge. Was passiert mit der Schwingungsdauer?</p>
        <p>2. Verändere die Masse bei gleicher Pendellänge. Ändert sich die Schwingungsdauer?</p>
        <p>3. Verändere die Anfangsauslenkung. Hat sie einen Einfluss auf die Schwingungsdauer?</p>

        <div class="formula">
            T = 2π · √(l / g)
        </div>

        <p>Die Schwingungsdauer T hängt nur von der Pendellänge l und der Erdbeschleunigung g ab – nicht von der Masse!</p>
    </div>
</div>

<script>
// Konstanten
const g = 9.81; // Erdbeschleunigung in m/s²
const scale = 150; // Pixel pro Meter

// Canvas Setup
const canvas = document.getElementById('pendulum');
const ctx = canvas.getContext('2d');
const originX = canvas.width / 2;
const originY = 50;

// Zustandsvariablen
let length = 1.0;      // Pendellänge in m
let mass = 0.5;        // Masse in kg
let angle = 15;        // Anfangsauslenkung in Grad
let theta = 0;         // Aktueller Winkel in rad
let omega = 0;         // Winkelgeschwindigkeit
let running = true;
let swingCount = 0;
let lastSign = 1;
let lastTime = 0;

// DOM Elemente
const sliderLength = document.getElementById('slider-length');
const sliderMass = document.getElementById('slider-mass');
const sliderAngle = document.getElementById('slider-angle');
const valLength = document.getElementById('val-length');
const valMass = document.getElementById('val-mass');
const valAngle = document.getElementById('val-angle');
const outPeriod = document.getElementById('out-period');
const outFrequency = document.getElementById('out-frequency');
const outCount = document.getElementById('out-count');
const btnStart = document.getElementById('btn-start');
const btnStop = document.getElementById('btn-stop');
const btnReset = document.getElementById('btn-reset');

// Periodendauer berechnen (theoretisch)
function calculatePeriod(l) {
    return 2 * Math.PI * Math.sqrt(l / g);
}

// Anzeige aktualisieren
function updateDisplay() {
    const T = calculatePeriod(length);
    const f = 1 / T;
    outPeriod.textContent = T.toFixed(2) + ' s';
    outFrequency.textContent = f.toFixed(2) + ' Hz';
    outCount.textContent = swingCount;
}

// Pendel zeichnen
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Aufhängepunkt
    ctx.fillStyle = '#333';
    ctx.beginPath();
    ctx.arc(originX, originY, 5, 0, Math.PI * 2);
    ctx.fill();
    
    // Gestell
    ctx.strokeStyle = '#666';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(originX - 60, originY);
    ctx.lineTo(originX + 60, originY);
    ctx.stroke();
    
    // Pendelposition berechnen
    const displayLength = length * scale;
    const bobX = originX + displayLength * Math.sin(theta);
    const bobY = originY + displayLength * Math.cos(theta);
    
    // Faden
    ctx.strokeStyle = '#333';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(originX, originY);
    ctx.lineTo(bobX, bobY);
    ctx.stroke();
    
    // Pendelkörper (Größe abhängig von Masse)
    const radius = 10 + mass * 10;
    ctx.fillStyle = '#2c5aa0';
    ctx.beginPath();
    ctx.arc(bobX, bobY, radius, 0, Math.PI * 2);
    ctx.fill();
    
    // Schatten
    ctx.fillStyle = 'rgba(0,0,0,0.1)';
    ctx.beginPath();
    ctx.ellipse(bobX, originY + length * scale + 30, radius * 0.8, radius * 0.3, 0, 0, Math.PI * 2);
    ctx.fill();
}

// Physik-Update
function update(dt) {
    if (!running) return;
    
    // Bewegungsgleichung: d²θ/dt² = -(g/l) * sin(θ)
    const alpha = -(g / length) * Math.sin(theta);
    omega += alpha * dt;
    theta += omega * dt;
    
    // Schwingungen zählen (Nulldurchgang)
    const currentSign = Math.sign(theta);
    if (currentSign !== lastSign && currentSign === 1) {
        swingCount++;
        outCount.textContent = swingCount;
    }
    lastSign = currentSign;
}

// Animation Loop
function animate(timestamp) {
    const dt = Math.min((timestamp - lastTime) / 1000, 0.05);
    lastTime = timestamp;
    
    update(dt);
    draw();
    
    requestAnimationFrame(animate);
}

// Reset
function reset() {
    theta = angle * Math.PI / 180;
    omega = 0;
    swingCount = 0;
    lastSign = Math.sign(theta);
    updateDisplay();
}

// Event Listeners
sliderLength.addEventListener('input', (e) => {
    length = parseFloat(e.target.value);
    valLength.textContent = length.toFixed(2) + ' m';
    updateDisplay();
});

sliderMass.addEventListener('input', (e) => {
    mass = parseFloat(e.target.value);
    valMass.textContent = mass.toFixed(2) + ' kg';
});

sliderAngle.addEventListener('input', (e) => {
    angle = parseInt(e.target.value);
    valAngle.textContent = angle + '°';
    if (!running) {
        theta = angle * Math.PI / 180;
    }
});

btnStart.addEventListener('click', () => {
    running = true;
    btnStart.classList.add('active');
    btnStop.classList.remove('active');
});

btnStop.addEventListener('click', () => {
    running = false;
    btnStop.classList.add('active');
    btnStart.classList.remove('active');
});

btnReset.addEventListener('click', () => {
    reset();
    running = true;
    btnStart.classList.add('active');
    btnStop.classList.remove('active');
});

// Initialisierung
reset();
requestAnimationFrame(animate);
</script>

</body>
</html>
