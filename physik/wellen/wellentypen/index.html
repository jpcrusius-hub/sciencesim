<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wellentypen – Transversal, Longitudinal, Kreiswelle</title>
    <meta name="subject" content="Physik">
    <meta name="topic" content="Wellen">
    <meta name="grade" content="11-12">
    <meta name="description" content="Vergleich der drei fundamentalen Wellentypen mit Teilchenmodell">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 15px;
            color: #222;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 12px;
        }

        .breadcrumb {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 4px;
        }

        .breadcrumb a {
            color: #2c5aa0;
            text-decoration: none;
        }

        h1 {
            font-size: 1.3em;
            font-weight: 600;
            color: #222;
        }

        .subtitle {
            font-size: 0.9em;
            color: #555;
            margin-top: 2px;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 15px;
        }

        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .canvas-stack {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .wave-panel {
            background: #fff;
            border: 1px solid #ddd;
            padding: 10px;
        }

        .wave-panel h2 {
            font-size: 0.95em;
            font-weight: 600;
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .wave-panel h2 span {
            font-weight: 400;
            font-size: 0.85em;
            color: #666;
        }

        .wave-panel canvas {
            display: block;
            width: 100%;
            background: #fafafa;
            border: 1px solid #eee;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .card {
            background: #fff;
            border: 1px solid #ddd;
            padding: 12px;
        }

        .card h3 {
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 10px;
            padding-bottom: 6px;
            border-bottom: 1px solid #eee;
            color: #333;
        }

        .slider-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 8px;
        }

        .slider-row:last-child {
            margin-bottom: 0;
        }

        .slider-label {
            min-width: 85px;
            font-size: 0.8em;
            color: #555;
        }

        input[type="range"] {
            flex: 1;
            height: 4px;
            -webkit-appearance: none;
            background: #ddd;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: #2c5aa0;
            cursor: pointer;
        }

        .slider-value {
            min-width: 45px;
            text-align: right;
            font-size: 0.8em;
            font-weight: 500;
            color: #2c5aa0;
        }

        .btn-row {
            display: flex;
            gap: 8px;
            margin-top: 5px;
        }

        button {
            flex: 1;
            padding: 8px;
            border: 1px solid #ccc;
            background: #fff;
            font-size: 0.8em;
            font-weight: 500;
            cursor: pointer;
            font-family: inherit;
        }

        button:hover {
            background: #f5f5f5;
        }

        button.active {
            background: #2c5aa0;
            color: #fff;
            border-color: #2c5aa0;
        }

        .checkbox-row {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
            gap: 8px;
            font-size: 0.8em;
            cursor: pointer;
        }

        .checkbox-row input {
            width: 14px;
            height: 14px;
            cursor: pointer;
            accent-color: #2c5aa0;
        }

        .info-box {
            font-size: 0.8em;
            line-height: 1.5;
            color: #555;
        }

        .info-box p {
            margin-bottom: 8px;
        }

        .info-box p:last-child {
            margin-bottom: 0;
        }

        .formula {
            background: #f5f5f5;
            padding: 6px 10px;
            font-family: "Times New Roman", serif;
            text-align: center;
            margin: 6px 0;
            border-left: 3px solid #2c5aa0;
        }

        .legend-row {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8em;
            margin-bottom: 4px;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border: 1px solid #ccc;
        }

        footer {
            text-align: center;
            padding: 12px;
            font-size: 0.8em;
            color: #888;
            border-top: 1px solid #ddd;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <p class="breadcrumb"><a href="../../../">Uebersicht</a> · Physik · Wellen</p>
            <h1>Wellentypen im Vergleich</h1>
            <p class="subtitle">Transversalwelle, Longitudinalwelle, Kreiswelle (Oberflächenwelle)</p>
        </header>

        <div class="main-grid">
            <div class="canvas-stack">
                <div class="wave-panel">
                    <h2>Transversalwelle <span>Auslenkung senkrecht zur Ausbreitung</span></h2>
                    <canvas id="canvasTrans"></canvas>
                </div>
                <div class="wave-panel">
                    <h2>Longitudinalwelle <span>Auslenkung parallel zur Ausbreitung</span></h2>
                    <canvas id="canvasLong"></canvas>
                </div>
                <div class="wave-panel">
                    <h2>Kreiswelle <span>Kreisförmige Teilchenbahnen (Oberflächenwelle)</span></h2>
                    <canvas id="canvasCirc"></canvas>
                </div>
            </div>

            <div class="sidebar">
                <div class="card">
                    <h3>Parameter</h3>
                    <div class="slider-row">
                        <span class="slider-label">Amplitude:</span>
                        <input type="range" id="sliderAmp" min="5" max="50" value="20">
                        <span class="slider-value" id="valAmp">0,20 m</span>
                    </div>
                    <div class="slider-row">
                        <span class="slider-label">Wellenlänge:</span>
                        <input type="range" id="sliderLambda" min="50" max="400" value="150">
                        <span class="slider-value" id="valLambda">1,50 m</span>
                    </div>
                    <div class="slider-row">
                        <span class="slider-label">Frequenz:</span>
                        <input type="range" id="sliderFreq" min="10" max="100" value="40">
                        <span class="slider-value" id="valFreq">0,40 Hz</span>
                    </div>
                    <div class="slider-row">
                        <span class="slider-label">Teilchen:</span>
                        <input type="range" id="sliderParticles" min="10" max="50" value="25">
                        <span class="slider-value" id="valParticles">25</span>
                    </div>
                    <div class="slider-row" style="margin-top:8px; padding-top:8px; border-top:1px solid #eee;">
                        <span class="slider-label">Geschw. v:</span>
                        <span class="slider-value" id="valSpeed" style="min-width:70px;">0,60 m/s</span>
                    </div>
                    <div class="btn-row">
                        <button class="active" id="btnPlay">Pause</button>
                        <button id="btnReset">Reset</button>
                    </div>
                </div>

                <div class="card">
                    <h3>Anzeige</h3>
                    <label class="checkbox-row">
                        <input type="checkbox" id="chkEquilibrium" checked>
                        Ruhelagen anzeigen
                    </label>
                    <label class="checkbox-row">
                        <input type="checkbox" id="chkTrajectory">
                        Teilchenbahnen zeigen
                    </label>
                    <label class="checkbox-row">
                        <input type="checkbox" id="chkHighlight" checked>
                        Referenzteilchen markieren
                    </label>
                    <label class="checkbox-row">
                        <input type="checkbox" id="chkWavefront" checked>
                        Wellenform zeichnen
                    </label>
                </div>

                <div class="card">
                    <h3>Legende</h3>
                    <div class="legend-row">
                        <span class="legend-dot" style="background:#2c5aa0;border-radius:50%;"></span>
                        Teilchen (Momentanposition)
                    </div>
                    <div class="legend-row">
                        <span class="legend-dot" style="background:#ccc;border-radius:50%;"></span>
                        Ruhelage
                    </div>
                    <div class="legend-row">
                        <span class="legend-dot" style="background:#c9302c;border-radius:50%;"></span>
                        Referenzteilchen
                    </div>
                    <div class="legend-row">
                        <span class="legend-dot" style="background:none;border:2px solid #2c5aa0;border-radius:50%;"></span>
                        Teilchenbahn
                    </div>
                </div>

                <div class="card">
                    <h3>Physik</h3>
                    <div class="info-box">
                        <p><strong>Transversal:</strong> Schwingung ⊥ Ausbreitung (z.B. Seilwelle, Licht)</p>
                        <p><strong>Longitudinal:</strong> Schwingung ∥ Ausbreitung (z.B. Schall)</p>
                        <p><strong>Kreiswelle:</strong> Kombination beider Komponenten (Wasseroberflaeche)</p>
                        <div class="formula">v = λ · f</div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            Wellentypen – Physik Sekundarstufe II
        </footer>
    </div>

    <script>
        // === CANVAS SETUP ===
        const canvasTrans = document.getElementById('canvasTrans');
        const canvasLong = document.getElementById('canvasLong');
        const canvasCirc = document.getElementById('canvasCirc');
        const ctxT = canvasTrans.getContext('2d');
        const ctxL = canvasLong.getContext('2d');
        const ctxC = canvasCirc.getContext('2d');

        let W, H;

        function resizeCanvases() {
            const rect = canvasTrans.parentElement.getBoundingClientRect();
            W = rect.width - 22;
            H = 100;
            
            [canvasTrans, canvasLong, canvasCirc].forEach(c => {
                c.width = W;
                c.height = H;
                c.style.height = H + 'px';
            });
        }
        resizeCanvases();
        window.addEventListener('resize', resizeCanvases);

        // === PARAMETER ===
        // Maßstab: 100 px = 1 m
        const SCALE = 100; // px pro Meter
        
        let amplitude = 0.20;    // in Metern
        let wavelength = 1.50;   // in Metern
        let frequency = 0.40;    // in Hz
        let numParticles = 25;
        let paused = false;
        let time = 0;

        let showEquilibrium = true;
        let showTrajectory = false;
        let showHighlight = true;
        let showWavefront = true;
        
        // Abgeleitete Größen
        function getSpeed() { return wavelength * frequency; }

        // === UI BINDINGS ===
        document.getElementById('sliderAmp').oninput = function() {
            amplitude = +this.value / 100; // cm -> m
            document.getElementById('valAmp').textContent = amplitude.toFixed(2).replace('.', ',') + ' m';
            updateSpeed();
        };

        document.getElementById('sliderLambda').oninput = function() {
            wavelength = +this.value / 100; // cm -> m
            document.getElementById('valLambda').textContent = wavelength.toFixed(2).replace('.', ',') + ' m';
            updateSpeed();
        };

        document.getElementById('sliderFreq').oninput = function() {
            frequency = +this.value / 100;
            document.getElementById('valFreq').textContent = frequency.toFixed(2).replace('.', ',') + ' Hz';
            updateSpeed();
        };
        
        function updateSpeed() {
            const v = getSpeed();
            document.getElementById('valSpeed').textContent = v.toFixed(2).replace('.', ',') + ' m/s';
        }

        document.getElementById('sliderParticles').oninput = function() {
            numParticles = +this.value;
            document.getElementById('valParticles').textContent = numParticles;
        };

        document.getElementById('btnPlay').onclick = function() {
            paused = !paused;
            this.textContent = paused ? 'Start' : 'Pause';
            this.classList.toggle('active', !paused);
        };

        document.getElementById('btnReset').onclick = function() {
            amplitude = 0.20; wavelength = 1.50; frequency = 0.40; numParticles = 25;
            paused = false; time = 0;
            document.getElementById('sliderAmp').value = 20;
            document.getElementById('sliderLambda').value = 150;
            document.getElementById('sliderFreq').value = 40;
            document.getElementById('sliderParticles').value = 25;
            document.getElementById('valAmp').textContent = '0,20 m';
            document.getElementById('valLambda').textContent = '1,50 m';
            document.getElementById('valFreq').textContent = '0,40 Hz';
            document.getElementById('valParticles').textContent = '25';
            updateSpeed();
            document.getElementById('btnPlay').textContent = 'Pause';
            document.getElementById('btnPlay').classList.add('active');
        };

        document.getElementById('chkEquilibrium').onchange = function() { showEquilibrium = this.checked; };
        document.getElementById('chkTrajectory').onchange = function() { showTrajectory = this.checked; };
        document.getElementById('chkHighlight').onchange = function() { showHighlight = this.checked; };
        document.getElementById('chkWavefront').onchange = function() { showWavefront = this.checked; };

        // === PHYSICS ===
        // Wellenzahl k = 2π/λ (in 1/m)
        // Für Pixel: k_px = k / SCALE = 2π / (λ * SCALE)
        const k_px = () => 2 * Math.PI / (wavelength * SCALE);
        const omega = () => 2 * Math.PI * frequency;
        
        // Amplitude in Pixel
        const amp_px = () => amplitude * SCALE;

        // === DRAWING FUNCTIONS ===

        function drawTransversal(ctx) {
            ctx.clearRect(0, 0, W, H);
            const centerY = H / 2;
            const margin = 30;
            const spacing = (W - 2 * margin) / (numParticles - 1);
            const A = amp_px();

            // Maßstab anzeigen
            ctx.fillStyle = '#888';
            ctx.font = '10px sans-serif';
            ctx.fillText('Ausbreitung →', W - 80, 12);
            drawScaleBar(ctx, margin, H - 12);

            // Wellenform
            if (showWavefront) {
                ctx.beginPath();
                ctx.strokeStyle = 'rgba(44, 90, 160, 0.3)';
                ctx.lineWidth = 2;
                for (let x = margin; x <= W - margin; x++) {
                    const phase = k_px() * x - omega() * time;
                    const y = centerY - A * Math.sin(phase);
                    if (x === margin) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }

            // Teilchen
            for (let i = 0; i < numParticles; i++) {
                const x0 = margin + i * spacing;
                const phase = k_px() * x0 - omega() * time;
                const y = centerY - A * Math.sin(phase);

                // Ruhelage
                if (showEquilibrium) {
                    ctx.beginPath();
                    ctx.arc(x0, centerY, 3, 0, 2 * Math.PI);
                    ctx.fillStyle = '#ccc';
                    ctx.fill();
                    
                    // Verbindungslinie
                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(200,200,200,0.5)';
                    ctx.lineWidth = 1;
                    ctx.moveTo(x0, centerY);
                    ctx.lineTo(x0, y);
                    ctx.stroke();
                }

                // Bahn (vertikal)
                if (showTrajectory) {
                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(44, 90, 160, 0.3)';
                    ctx.lineWidth = 1;
                    ctx.moveTo(x0, centerY - A);
                    ctx.lineTo(x0, centerY + A);
                    ctx.stroke();
                }

                // Teilchen
                ctx.beginPath();
                ctx.arc(x0, y, 5, 0, 2 * Math.PI);
                const isRef = (i === Math.floor(numParticles / 3));
                ctx.fillStyle = (showHighlight && isRef) ? '#c9302c' : '#2c5aa0';
                ctx.fill();
            }
        }

        function drawLongitudinal(ctx) {
            ctx.clearRect(0, 0, W, H);
            const centerY = H / 2;
            const margin = 30;
            const baseSpacing = (W - 2 * margin) / (numParticles - 1);
            const A = amp_px();

            // Maßstab anzeigen
            ctx.fillStyle = '#888';
            ctx.font = '10px sans-serif';
            ctx.fillText('Ausbreitung →', W - 80, 12);
            drawScaleBar(ctx, margin, H - 12);

            // Verdichtung/Verdünnung visualisieren
            if (showWavefront) {
                for (let x = margin; x <= W - margin; x += 2) {
                    const phase = k_px() * x - omega() * time;
                    const density = 0.5 + 0.5 * Math.sin(phase);
                    ctx.fillStyle = `rgba(44, 90, 160, ${0.05 + density * 0.15})`;
                    ctx.fillRect(x, centerY - 15, 2, 30);
                }
            }

            // Teilchen
            for (let i = 0; i < numParticles; i++) {
                const x0 = margin + i * baseSpacing;
                const phase = k_px() * x0 - omega() * time;
                const dx = A * Math.sin(phase);
                const x = x0 + dx;

                // Ruhelage
                if (showEquilibrium) {
                    ctx.beginPath();
                    ctx.arc(x0, centerY, 3, 0, 2 * Math.PI);
                    ctx.fillStyle = '#ccc';
                    ctx.fill();

                    // Verbindungslinie
                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(200,200,200,0.5)';
                    ctx.lineWidth = 1;
                    ctx.moveTo(x0, centerY);
                    ctx.lineTo(x, centerY);
                    ctx.stroke();
                }

                // Bahn (horizontal)
                if (showTrajectory) {
                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(44, 90, 160, 0.3)';
                    ctx.lineWidth = 1;
                    ctx.moveTo(x0 - A, centerY);
                    ctx.lineTo(x0 + A, centerY);
                    ctx.stroke();
                }

                // Teilchen
                ctx.beginPath();
                ctx.arc(x, centerY, 5, 0, 2 * Math.PI);
                const isRef = (i === Math.floor(numParticles / 3));
                ctx.fillStyle = (showHighlight && isRef) ? '#c9302c' : '#2c5aa0';
                ctx.fill();
            }

            // Beschriftung Verdichtung/Verdünnung
            ctx.fillStyle = '#555';
            ctx.font = '9px sans-serif';
            for (let i = 0; i < numParticles - 1; i++) {
                const x0 = margin + i * baseSpacing;
                const phase = k_px() * x0 - omega() * time;
                if (Math.abs(Math.sin(phase) - 1) < 0.3 && i > 2 && i < numParticles - 3) {
                    ctx.fillText('Verdichtung', x0 - 25, 12);
                    break;
                }
            }
        }

        function drawCircular(ctx) {
            ctx.clearRect(0, 0, W, H);
            const centerY = H / 2;
            const margin = 30;
            const spacing = (W - 2 * margin) / (numParticles - 1);
            const A = amp_px();

            // Maßstab anzeigen
            ctx.fillStyle = '#888';
            ctx.font = '10px sans-serif';
            ctx.fillText('Ausbreitung →', W - 80, 12);
            drawScaleBar(ctx, margin, H - 12);

            // Wellenform (Oberfläche)
            if (showWavefront) {
                ctx.beginPath();
                ctx.strokeStyle = 'rgba(44, 90, 160, 0.3)';
                ctx.lineWidth = 2;
                for (let x = margin; x <= W - margin; x++) {
                    const phase = k_px() * x - omega() * time;
                    const y = centerY - A * Math.sin(phase);
                    if (x === margin) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }

            // Teilchen auf Kreisbahnen
            for (let i = 0; i < numParticles; i++) {
                const x0 = margin + i * spacing;
                const phase = k_px() * x0 - omega() * time;
                
                const dx = A * Math.cos(phase);
                const dy = -A * Math.sin(phase);
                
                const x = x0 + dx;
                const y = centerY + dy;

                // Ruhelage
                if (showEquilibrium) {
                    ctx.beginPath();
                    ctx.arc(x0, centerY, 3, 0, 2 * Math.PI);
                    ctx.fillStyle = '#ccc';
                    ctx.fill();
                }

                // Kreisbahn
                if (showTrajectory) {
                    ctx.beginPath();
                    ctx.arc(x0, centerY, A, 0, 2 * Math.PI);
                    ctx.strokeStyle = 'rgba(44, 90, 160, 0.3)';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }

                // Teilchen
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, 2 * Math.PI);
                const isRef = (i === Math.floor(numParticles / 3));
                ctx.fillStyle = (showHighlight && isRef) ? '#c9302c' : '#2c5aa0';
                ctx.fill();

                // Verbindung zur Ruhelage
                if (showEquilibrium) {
                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(200,200,200,0.5)';
                    ctx.lineWidth = 1;
                    ctx.moveTo(x0, centerY);
                    ctx.lineTo(x, y);
                    ctx.stroke();
                }
            }

            // Hinweis
            ctx.fillStyle = '#555';
            ctx.font = '9px sans-serif';
            ctx.fillText('Kreisbahn (Tiefwasser)', 10, 12);
        }
        
        // Maßstabsbalken zeichnen
        function drawScaleBar(ctx, x, y) {
            const barLength = SCALE; // 1 Meter in Pixeln
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x + barLength, y);
            ctx.stroke();
            
            // Endstriche
            ctx.beginPath();
            ctx.moveTo(x, y - 3);
            ctx.lineTo(x, y + 3);
            ctx.moveTo(x + barLength, y - 3);
            ctx.lineTo(x + barLength, y + 3);
            ctx.stroke();
            
            ctx.fillStyle = '#666';
            ctx.font = '9px sans-serif';
            ctx.fillText('1 m', x + barLength/2 - 8, y - 5);
        }

        // === ANIMATION LOOP ===
        let lastTime = 0;

        function animate(timestamp) {
            if (!lastTime) lastTime = timestamp;
            const dt = (timestamp - lastTime) / 1000;
            lastTime = timestamp;

            if (!paused) {
                time += dt;
            }

            drawTransversal(ctxT);
            drawLongitudinal(ctxL);
            drawCircular(ctxC);

            requestAnimationFrame(animate);
        }

        requestAnimationFrame(animate);
    </script>
</body>
</html>
